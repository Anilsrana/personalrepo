name: Update Repo1 Tag

on:
  workflow_dispatch:
    inputs:
      tag_version:
        description: "Enter tag version (e.g. v2, v3)"
        required: true
        default: "v2"

jobs:
  update-repo1:
    runs-on: ubuntu-latest

    steps:
      # Checkout repo2 (default)
      - name: Checkout repo2
        uses: actions/checkout@v4

      # Checkout repo1 (needs PAT with repo write access)
      - name: Checkout repo1
        uses: actions/checkout@v4
        with:
          repository: Anilsrana/test1
          token: ${{ secrets.REPO1_TOKEN }}   # PAT stored in repo2 secrets
          path: test1

      # Update test.txt with input tag
      - name: Update tag version
        run: |
          cd test1
          ls -la
          sed -i "s/tag = .*/tag = ${{ github.event.inputs.tag_version }}/" test.txt
          cat test.txt

      # Commit and push changes
      - name: Commit & Push changes
        run: |
          cd test1
          git config user.name "github-actions[bot]"
          git config user.email "githu
